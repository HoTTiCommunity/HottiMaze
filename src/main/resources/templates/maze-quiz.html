<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${maze.mazeTitle} + ' í€´ì¦ˆ - HottiMaze'">ë¯¸ë¡œ í€´ì¦ˆ - HottiMaze</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    header {
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      color: white;
      padding: 25px;
      text-align: center;
    }

    header h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .quiz-content {
      padding: 30px;
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e9ecef;
    }

    .quiz-title {
      font-size: 1.8rem;
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .quiz-progress {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .progress-bar {
      flex: 1;
      max-width: 300px;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      transition: width 0.3s ease;
    }

    .progress-text {
      color: #6c757d;
      font-weight: bold;
    }

    .quiz-question {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      display: none;
    }

    .quiz-question.active {
      display: block;
      animation: slideIn 0.3s ease;
    }

    .question-number {
      color: #6c757d;
      font-size: 0.9rem;
      margin-bottom: 10px;
      text-align: center;
    }

    .question-title {
      font-size: 1.4rem;
      color: #2c3e50;
      margin-bottom: 15px;
      font-weight: 600;
      text-align: center;
    }

    .question-content {
      font-size: 1.1rem;
      color: #495057;
      margin-bottom: 20px;
      text-align: center;
      line-height: 1.6;
    }

    .question-image {
      width: 100%;
      max-width: 400px;
      height: 250px;
      object-fit: cover;
      border-radius: 15px;
      margin: 0 auto 20px;
      display: block;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .quiz-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 30px;
    }

    .option-button {
      padding: 15px 20px;
      border: 2px solid #e9ecef;
      background: white;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-size: 1rem;
      font-weight: 500;
      color: #495057;
    }

    .option-button:hover {
      border-color: #4ecdc4;
      background: #f8f9fa;
      transform: translateY(-2px);
    }

    .option-button.selected {
      border-color: #4ecdc4;
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      color: white;
    }

    .option-button.correct {
      border-color: #28a745;
      background: linear-gradient(45deg, #28a745, #20c997);
      color: white;
    }

    .option-button.incorrect {
      border-color: #dc3545;
      background: linear-gradient(45deg, #dc3545, #e83e8c);
      color: white;
    }

    .quiz-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f8f9fa;
      padding: 20px;
      border-radius: 15px;
    }

    .quiz-timer {
      background: linear-gradient(45deg, #ff9a9e, #fecfef);
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 1.1rem;
    }

    .quiz-nav {
      display: flex;
      gap: 15px;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      color: white;
      box-shadow: 0 5px 20px rgba(78, 205, 196, 0.3);
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(45deg, #95a5a6, #7f8c8d);
      color: white;
      box-shadow: 0 5px 20px rgba(149, 165, 166, 0.3);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(149, 165, 166, 0.4);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .quiz-result {
      text-align: center;
      padding: 50px;
      display: none;
    }

    .quiz-result.show {
      display: block;
      animation: slideIn 0.5s ease;
    }

    .result-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .result-title {
      font-size: 2rem;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .result-score {
      font-size: 1.3rem;
      color: #6c757d;
      margin-bottom: 30px;
    }

    .result-details {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      text-align: left;
    }

    .success {
      color: #28a745;
    }

    .fail {
      color: #dc3545;
    }

    .back-button {
      position: fixed;
      top: 30px;
      left: 30px;
      background: rgba(255, 255, 255, 0.9);
      color: #2c3e50;
      border: none;
      border-radius: 50px;
      padding: 12px 20px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      text-decoration: none;
      z-index: 1000;
    }

    .back-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      color: #2c3e50;
      text-decoration: none;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .quiz-options {
        grid-template-columns: 1fr;
      }

      .quiz-content {
        padding: 20px;
      }

      .quiz-controls {
        flex-direction: column;
        gap: 15px;
      }

      .quiz-nav {
        width: 100%;
        justify-content: center;
      }

      .back-button {
        position: static;
        margin: 10px;
        width: fit-content;
      }
    }
  </style>
</head>
<body>
<a th:href="@{'/mazes/' + ${maze.id}}" class="back-button">
  â† ë¯¸ë¡œë¡œ ëŒì•„ê°€ê¸°
</a>

<div class="container">
  <header>
    <h1>ğŸ§© ë¯¸ê¶ í€´ì¦ˆ</h1>
    <p th:text="${maze.mazeTitle} + ' ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”!'">ë¯¸ë¡œ ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”!</p>
  </header>

  <div class="quiz-content">
    <!-- í€´ì¦ˆ ì‹œì‘ í™”ë©´ -->
    <div id="quizStart" class="quiz-header">
      <h2 class="quiz-title" th:text="${maze.mazeTitle} + ' í€´ì¦ˆ'">ë¯¸ë¡œ í€´ì¦ˆ</h2>
      <p style="color: #6c757d; margin-bottom: 20px;">
        ì´ <span th:text="${#lists.size(questions)}">3</span>ê°œì˜ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.<br>
        ê° ë¬¸ì œë‹¹ 30ì´ˆì˜ ì‹œê°„ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤.
      </p>

      <!-- ë””ë²„ê¹… ì •ë³´ ì¶”ê°€ -->
      <div style="background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px; font-size: 0.8rem;">
        <strong>ë””ë²„ê¹… ì •ë³´:</strong><br>
        ë¯¸ë¡œ ID: <span th:text="${maze.id}">1</span><br>
        ë¯¸ë¡œ ì œëª©: <span th:text="${maze.mazeTitle}">ì œëª©</span><br>
        ë¬¸ì œ ê°œìˆ˜: <span th:text="${#lists.size(questions)}">0</span><br>
        <div th:each="q, iterStat : ${questions}">
          ë¬¸ì œ <span th:text="${iterStat.index + 1}">1</span>: <span th:text="${q.title}">ì œëª©ì—†ìŒ</span>
        </div>
      </div>

      <div th:if="${questions.isEmpty()}" class="alert" style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
        ì´ ë¯¸ë¡œì—ëŠ” ì•„ì§ ë¬¸ì œê°€ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
      </div>
      <button class="btn btn-primary" onclick="startQuiz()" th:disabled="${questions.isEmpty()}">
        ğŸš€ í€´ì¦ˆ ì‹œì‘í•˜ê¸°
      </button>
    </div>

    <!-- ì§„í–‰ë¥  í‘œì‹œ -->
    <div id="quizProgress" class="quiz-progress" style="display: none;">
      <span class="progress-text" id="currentQuestion">1</span>
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill" style="width: 0%"></div>
      </div>
      <span class="progress-text" id="totalQuestions" th:text="${#lists.size(questions)}">3</span>
    </div>

    <!-- ë¬¸ì œë“¤ -->
    <div id="quizQuestions">
      <div th:each="question, iterStat : ${questions}"
           class="quiz-question"
           th:data-question-id="${question.id}"
           th:data-correct-answer="${question.correctAnswer}">

        <div class="question-number" th:text="'ë¬¸ì œ ' + ${iterStat.index + 1} + '/' + ${#lists.size(questions)}">ë¬¸ì œ 1/3</div>
        <h3 class="question-title" th:text="${question.title ?: 'ì œëª© ì—†ìŒ'}">ë¬¸ì œ ì œëª©</h3>
        <p class="question-content" th:text="${question.content ?: 'ë‚´ìš© ì—†ìŒ'}">ë¬¸ì œ ë‚´ìš©</p>

        <!-- ë””ë²„ê¹… ì •ë³´ -->
        <div style="background: #e9ecef; padding: 5px; margin: 10px 0; font-size: 0.7rem; border-radius: 3px;">
          ID: <span th:text="${question.id}">-</span> |
          ìˆœì„œ: <span th:text="${question.questionOrder}">-</span> |
          ì •ë‹µ: <span th:text="${question.correctAnswer}">-</span>
        </div>

        <img th:if="${question.questionImage and question.questionImage != ''}"
             th:src="${question.questionImage}"
             th:alt="${question.title}"
             class="question-image"
             onerror="this.style.display='none'">

        <div class="quiz-options">
          <button class="option-button" th:text="${question.option1 ?: 'ì„ íƒì§€ 1'}" onclick="selectAnswer(1, this)">ì„ íƒì§€ 1</button>
          <button class="option-button" th:text="${question.option2 ?: 'ì„ íƒì§€ 2'}" onclick="selectAnswer(2, this)">ì„ íƒì§€ 2</button>
          <button class="option-button" th:text="${question.option3 ?: 'ì„ íƒì§€ 3'}" onclick="selectAnswer(3, this)">ì„ íƒì§€ 3</button>
          <button class="option-button" th:text="${question.option4 ?: 'ì„ íƒì§€ 4'}" onclick="selectAnswer(4, this)">ì„ íƒì§€ 4</button>
        </div>
      </div>
    </div>

    <!-- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
    <div id="quizControls" class="quiz-controls" style="display: none;">
      <div class="quiz-timer" id="quizTimer">â° 30ì´ˆ</div>
      <div class="quiz-nav">
        <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" style="display: none;">ì´ì „</button>
        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>ë‹¤ìŒ</button>
      </div>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="quizResult" class="quiz-result">
      <div class="result-icon" id="resultIcon">ğŸ‰</div>
      <div class="result-title" id="resultTitle">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
      <div class="result-score" id="resultScore">3ë¬¸ì œ ì¤‘ 2ë¬¸ì œë¥¼ ë§ì¶”ì…¨ìŠµë‹ˆë‹¤!</div>

      <div class="result-details">
        <h4 style="margin-bottom: 15px; color: #2c3e50;">ìƒì„¸ ê²°ê³¼</h4>
        <div id="resultDetails"></div>
      </div>

      <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
        <button class="btn btn-primary" onclick="restartQuiz()">ë‹¤ì‹œ ë„ì „</button>
        <a th:href="@{'/mazes/' + ${maze.id}}" class="btn btn-secondary">ë¯¸ë¡œë¡œ ëŒì•„ê°€ê¸°</a>
        <a href="/" class="btn btn-secondary">ë©”ì¸ìœ¼ë¡œ</a>
      </div>
    </div>
  </div>
</div>

<script th:inline="javascript">
  // ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„°
  const questions = /*[[${questions}]]*/ [];
  const mazeId = /*[[${maze.id}]]*/ 1;

  // í€´ì¦ˆ ê´€ë ¨ ë³€ìˆ˜
  let currentQuestionIndex = 0;
  let userAnswers = [];
  let timeLeft = 30;
  let quizTimer = null;
  let selectedAnswer = null;

  // í€´ì¦ˆ ì‹œì‘
  function startQuiz() {
    if (questions.length === 0) {
      alert('ë¬¸ì œê°€ ì—†ì–´ì„œ í€´ì¦ˆë¥¼ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    document.getElementById('quizStart').style.display = 'none';
    document.getElementById('quizProgress').style.display = 'flex';
    document.getElementById('quizControls').style.display = 'flex';

    currentQuestionIndex = 0;
    userAnswers = [];
    showQuestion();
    startTimer();
  }

  // ë¬¸ì œ í‘œì‹œ
  function showQuestion() {
    // ëª¨ë“  ë¬¸ì œ ìˆ¨ê¸°ê¸°
    const allQuestions = document.querySelectorAll('.quiz-question');
    allQuestions.forEach(q => q.classList.remove('active'));

    // í˜„ì¬ ë¬¸ì œ í‘œì‹œ
    if (currentQuestionIndex < allQuestions.length) {
      allQuestions[currentQuestionIndex].classList.add('active');
    }

    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
    document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;

    // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
    selectedAnswer = null;
    document.getElementById('nextBtn').disabled = true;
    document.getElementById('prevBtn').style.display = currentQuestionIndex > 0 ? 'block' : 'none';

    // ì„ íƒ ì´ˆê¸°í™”
    const options = allQuestions[currentQuestionIndex].querySelectorAll('.option-button');
    options.forEach(option => {
      option.classList.remove('selected', 'correct', 'incorrect');
    });

    // íƒ€ì´ë¨¸ ë¦¬ì…‹
    timeLeft = 30;
    updateTimer();
  }

  // ë‹µë³€ ì„ íƒ
  function selectAnswer(answerIndex, button) {
    const currentQuestion = document.querySelectorAll('.quiz-question')[currentQuestionIndex];
    const options = currentQuestion.querySelectorAll('.option-button');

    // ê¸°ì¡´ ì„ íƒ í•´ì œ
    options.forEach(opt => opt.classList.remove('selected'));

    // ìƒˆë¡œìš´ ì„ íƒ
    button.classList.add('selected');
    selectedAnswer = answerIndex;
    document.getElementById('nextBtn').disabled = false;
  }

  // ë‹¤ìŒ ë¬¸ì œ
  function nextQuestion() {
    if (selectedAnswer === null) return;

    // ë‹µë³€ ì €ì¥
    userAnswers[currentQuestionIndex] = selectedAnswer;

    // ì •ë‹µ í‘œì‹œ
    const currentQuestion = document.querySelectorAll('.quiz-question')[currentQuestionIndex];
    const correctAnswer = parseInt(currentQuestion.dataset.correctAnswer);
    const options = currentQuestion.querySelectorAll('.option-button');

    options.forEach((option, index) => {
      if (index + 1 === correctAnswer) {
        option.classList.add('correct');
      } else if (index + 1 === selectedAnswer && index + 1 !== correctAnswer) {
        option.classList.add('incorrect');
      }
    });

    // ì ì‹œ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
    setTimeout(() => {
      currentQuestionIndex++;

      if (currentQuestionIndex >= questions.length) {
        showResult();
      } else {
        showQuestion();
      }
    }, 1500);
  }

  // ì´ì „ ë¬¸ì œ
  function prevQuestion() {
    if (currentQuestionIndex > 0) {
      currentQuestionIndex--;
      showQuestion();

      // ì´ì „ ë‹µë³€ ë³µì›
      if (userAnswers[currentQuestionIndex]) {
        const currentQuestion = document.querySelectorAll('.quiz-question')[currentQuestionIndex];
        const options = currentQuestion.querySelectorAll('.option-button');
        const previousAnswer = userAnswers[currentQuestionIndex];

        if (previousAnswer) {
          options[previousAnswer - 1].classList.add('selected');
          selectedAnswer = previousAnswer;
          document.getElementById('nextBtn').disabled = false;
        }
      }
    }
  }

  // ê²°ê³¼ í‘œì‹œ
  function showResult() {
    document.getElementById('quizProgress').style.display = 'none';
    document.getElementById('quizControls').style.display = 'none';
    document.querySelector('.quiz-question.active').classList.remove('active');

    const score = calculateScore();
    const percentage = Math.round((score / questions.length) * 100);

    let resultIcon, resultTitle, resultClass;

    if (percentage >= 80) {
      resultIcon = 'ğŸ‰';
      resultTitle = 'ì™„ë²½í•©ë‹ˆë‹¤!';
      resultClass = 'success';
    } else if (percentage >= 60) {
      resultIcon = 'ğŸ‘';
      resultTitle = 'ì˜í–ˆì–´ìš”!';
      resultClass = 'success';
    } else {
      resultIcon = 'ğŸ˜…';
      resultTitle = 'ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!';
      resultClass = 'fail';
    }

    document.getElementById('resultIcon').textContent = resultIcon;
    document.getElementById('resultTitle').textContent = resultTitle;
    document.getElementById('resultTitle').className = `result-title ${resultClass}`;
    document.getElementById('resultScore').textContent =
            `${questions.length}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§ì¶”ì…¨ìŠµë‹ˆë‹¤! (${percentage}%)`;

    // ìƒì„¸ ê²°ê³¼ í‘œì‹œ
    showDetailedResults();

    document.getElementById('quizResult').classList.add('show');
    stopTimer();
  }

  // ìƒì„¸ ê²°ê³¼ í‘œì‹œ
  function showDetailedResults() {
    const detailsContainer = document.getElementById('resultDetails');
    let detailsHTML = '';

    questions.forEach((question, index) => {
      const userAnswer = userAnswers[index] || 0;
      const isCorrect = userAnswer === question.correctAnswer;
      const icon = isCorrect ? 'âœ…' : 'âŒ';

      detailsHTML += `
                <div style="margin-bottom: 10px; padding: 10px; background: ${isCorrect ? '#d4edda' : '#f8d7da'}; border-radius: 8px;">
                    ${icon} <strong>ë¬¸ì œ ${index + 1}:</strong> ${question.title}<br>
                    <small style="color: #6c757d;">
                        ì •ë‹µ: ${getOptionText(question, question.correctAnswer)} |
                        ì„ íƒ: ${userAnswer ? getOptionText(question, userAnswer) : 'ì„ íƒí•˜ì§€ ì•ŠìŒ'}
                    </small>
                </div>
            `;
    });

    detailsContainer.innerHTML = detailsHTML;
  }

  // ì„ íƒì§€ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
  function getOptionText(question, optionNumber) {
    switch(optionNumber) {
      case 1: return question.option1;
      case 2: return question.option2;
      case 3: return question.option3;
      case 4: return question.option4;
      default: return 'ì—†ìŒ';
    }
  }

  // ì ìˆ˜ ê³„ì‚°
  function calculateScore() {
    let score = 0;
    questions.forEach((question, index) => {
      if (userAnswers[index] === question.correctAnswer) {
        score++;
      }
    });
    return score;
  }

  // í€´ì¦ˆ ì¬ì‹œì‘
  function restartQuiz() {
    document.getElementById('quizResult').classList.remove('show');
    document.getElementById('quizStart').style.display = 'block';
    currentQuestionIndex = 0;
    userAnswers = [];
    selectedAnswer = null;
  }

  // íƒ€ì´ë¨¸ ì‹œì‘
  function startTimer() {
    quizTimer = setInterval(() => {
      timeLeft--;
      updateTimer();

      if (timeLeft <= 0) {
        // ì‹œê°„ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œë¡œ
        if (selectedAnswer !== null) {
          nextQuestion();
        } else {
          // ì„ íƒí•˜ì§€ ì•Šì€ ê²½ìš° 0ìœ¼ë¡œ ì €ì¥í•˜ê³  ë‹¤ìŒ ë¬¸ì œë¡œ
          userAnswers[currentQuestionIndex] = 0;
          currentQuestionIndex++;
          if (currentQuestionIndex >= questions.length) {
            showResult();
          } else {
            showQuestion();
          }
        }
      }
    }, 1000);
  }

  // íƒ€ì´ë¨¸ ì •ì§€
  function stopTimer() {
    if (quizTimer) {
      clearInterval(quizTimer);
      quizTimer = null;
    }
  }

  // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
  function updateTimer() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    document.getElementById('quizTimer').textContent = `â° ${timeString}`;

    // ì‹œê°„ì´ 10ì´ˆ ë¯¸ë§Œì¼ ë•Œ ìƒ‰ìƒ ë³€ê²½
    const timerElement = document.getElementById('quizTimer');
    if (timeLeft <= 10) {
      timerElement.style.background = 'linear-gradient(45deg, #dc3545, #e83e8c)';
    } else {
      timerElement.style.background = 'linear-gradient(45deg, #ff9a9e, #fecfef)';
    }
  }

  // ESC í‚¤ë¡œ í€´ì¦ˆ ì¢…ë£Œ
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      if (confirm('í€´ì¦ˆë¥¼ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        window.location.href = '/mazes/' + mazeId;
      }
    }
  });
</script>
</body>
</html>